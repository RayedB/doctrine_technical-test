const request = require('supertest');
const server = require('./server.js');

beforeAll(async () => {
    console.log('Starting tests!');
    jest.setTimeout(500000);
});

afterAll(async () => {
    server.close()
});

describe('Get Jurisdiction contact infos', () => {
    it('should return jurisdiction contactInfos object', async () => {
        const expectedResponse = {
            "jurisdiction_contact_infos": {
                "telephone": [
                    {
                        "data": "0144329595",
                        "verified": true
                    },
                    {
                        "data": "0685545714",
                        "verified": true
                    }
                ],
                "email": [
                    {
                    "data": "biblio.courdecassation@justice.fr",
                    "verified": true
                    }
                ],
                "fax": []
            }
        }
        const response = await request(server).get('/getJurisdictionContactInfos?jurisdiction_id=JUR359D88F9B71718E7F4A6');
        expect(response.status).toEqual(200);
        expect(response.body).toMatchObject(expectedResponse)
    });
});

describe('Get Jurisdiction details and decisions', () => {
    describe('Get StateCouncil data', () => {
        it('should return the State Council jurisdiction Data', async() => {
            const expectedResponse = {
                "jurisdiction_infos": {
                    "id": 2,
                    "jurisdiction_id": "JUR64FE952E9CA370DAC630",
                    "pivot_local": "ce",
                    "name": "Conseil d'État",
                    "address": "1 Place du Palais Royal",
                    "postal_code": "75001",
                    "commune_name": "PARIS",
                    "telephone": "0140208000",
                    "fax": null,
                    "email": null,
                    "website": "http://www.conseil-etat.fr/"
                    }
            }
            const response = await request(server).get('/jurisdiction/JUR64FE952E9CA370DAC630')
            expect(response.status).toEqual(200);
            expect(response.body).toMatchObject(expectedResponse);
        })
    })
    describe('Get Cassation data', () => {
        it('should return the Cassation jurisdiction Data', async() => {
            const expectedResponse = {
                "jurisdiction_infos": {
                    "id": 1,
                    "jurisdiction_id": "JUR359D88F9B71718E7F4A6",
                    "pivot_local": "cass",
                    "name": "Cour de cassation",
                    "address": "5 Quai de l'Horloge",
                    "postal_code": "75055",
                    "commune_name": "PARIS CEDEX 01",
                    "telephone": "0144329595",
                    "fax": null,
                    "email": null,
                    "website": "https://www.courdecassation.fr"
                    }    
            }
            const response = await request(server).get('/jurisdiction/JUR359D88F9B71718E7F4A6')
            expect(response.status).toEqual(200);
            expect(response.body).toMatchObject(expectedResponse);
        })
    })
})

describe('Get Decision Data', () => {
    it('should return decision data with title and decision', async () => {
        const expectedResponse = 
            {
                "title": "Cour de cassation, criminelle, Chambre criminelle, 31 octobre 2017, 17-80.872, Publié au bulletin",
                "html_content": "<p>LA COUR DE CASSATION, CHAMBRE CRIMINELLE, a rendu l'arrêt suivant : </p>\\n<br>\\n<p>Statuant sur le pourvoi formé par :</p>\\n<p>\\n<br clear=\"none\">- <br clear=\"none\">M. Ibrahim X..., </p>\\n<p>\\n<br clear=\"none\">contre l'arrêt n° 65 de la chambre de l'instruction de la cour d'appel de VERSAILLES, en date du 24 janvier 2017, qui, dans l'information suivie contre lui des chefs d'infractions à la législation sur les stupéfiants et association de malfaiteurs, a prononcé sur sa requête en nullité de la procédure ; </p>\\n<p>La COUR, statuant après débats en l'audience publique du 3 octobre 2017 où étaient présents dans la formation prévue à l'article 567-1-1 du code de procédure pénale : M. Soulard, président, M. Barbier, conseiller rapporteur, M. Straehli, conseiller de la chambre ; </p>\\n<p>Greffier de chambre : Mme Zita ; </p>\\n<p>Sur le rapport de M. le conseiller référendaire BARBIER, les observations de la société civile professionnelle SPINOSI et SUREAU, avocat en la Cour, et les conclusions de Mme l'avocat général LE DIMNA ; </p>\\n<p>Vu l'ordonnance du président de la chambre criminelle, en date du 12 mai 2017, prescrivant l'examen immédiat du pourvoi ; </p>\\n<p>Vu le mémoire produit ; </p>\\n<p>Attendu qu'il résulte de l'arrêt attaqué et des pièces de la procédure qu'agissant en flagrant délit, les fonctionnaires de police ont saisi le 13 avril 2016, outre une somme de près de 80 000 euros, plusieurs dizaines de kilogrammes de résine de cannabis dans une camionnette conduite par M. Moussa Y... et au domicile de M. Ibrahim X... ; qu'à l'issue de leur garde à vue, les intéressés ont été mis en examen le 15 avril 2016 des chefs d'infractions à la législation sur les stupéfiants et association de malfaiteurs ; </p>\\n<p>Que le 8 juillet 2016, l'avocat de M. X... a déposé une requête en nullité prise de l'irrégularité de la mesure de garde à vue, de l'irrégularité du placement sous scellés définitifs des produits stupéfiants saisis, enfin de l'irrégularité de la pesée desdits produits ; </p>\\n<p>En cet état : </p>\\n<p>Sur le premier moyen de cassation, pris de la violation des articles 6 de la Convention européenne des droits de l'homme, 112-2 du code pénal, préliminaire, 63-2, 591 et 593 du code de procédure pénale ; </p>\\n<p>\" en ce que la chambre de l'instruction a rejeté le moyen tiré de la nullité de la garde à vue du demandeur ; </p>\\n<p>\" aux motifs que M. Ibrahim X... a, lors de la notification des droits consécutifs à son placement en garde à vue par un officier de police judiciaire du commissariat d'Houilles le 13 avril 2016 à 8 heures 25, demandé que son frère soit informé de la mesure dont il faisait l'objet, prise par un officier de police judiciaire du commissariat d'Houilles, que lors de la reprise de la mesure de garde à vue par un officier de police judiciaire de la direction régionale de police judiciaire de Versailles, le même jour à 11 heures 35, M. X... a fait la même demande, considérant qu'aux termes de l'article 63-2 du code de procédure pénale :<br clear=\"none\">- Toute personne placée en garde à vue peut, à sa demande, faire prévenir, par téléphone, une personne avec laquelle elle vit habituellement ou l'un de ses parents en ligne directe, l'un de ses frères et soeurs ou son curateur ou son tuteur de la mesure dont elle est l'objet. Elle peut en outre faire prévenir son employeur ; que lorsque la personne gardée à vue est de nationalité étrangère, elle peut faire contacter les autorités consulaires de son pays. Sauf en cas de circonstance insurmontable, qui doit être mentionnée au procès-verbal, les diligences incombant aux enquêteurs en application du premier alinéa doivent intervenir au plus tard dans un délai de trois heures à compter du moment où la personne a formulé la demande. Le procureur de la République peut, à la demande de l'officier de police judiciaire, décider que l'avis prévu au premier alinéa du présent 1 sera différé ou ne sera pas délivré si cette décision est, au regard des circonstances, indispensable afin de permettre le recueil ou la conservation des preuves ou de prévenir une atteinte grave à la vie, à la liberté ou à l'intégrité physique d'une personne ; qu'aucune disposition légale n'impose à l'officier de police judiciaire de demander par écrit au procureur de la République de différer l'avis prévu au 1 de l'article 63-2 du code de procédure pénale, qu'il n'est imposé de même par aucune disposition légale au procureur de la République de faire connaître par écrit sa réponse à cette demande, qu'en l'occurrence, l'officier de police judiciaire du commissariat d'Houilles a consigné dans un procès-verbal rédigé en date du 13 avril 2016 à 9 heures 40, soit moins de trois heures après les placements en garde à vue, qu'il avait pris attache avec la permanence du parquet en la personne de M. Z..., vice-procureur de la République auquel il avait demandé l'autorisation de ne pas faire suite aux demandes d'avis à amis et famille formulées par les personnes gardées à vue, en raison de la nature de l'infraction poursuivie et du risque de dépérissement de preuve, qu'il mentionnait que ce magistrat lui avait indiqué que \" les avis famille et amis sont refusés \" (D39), que l'officier de police judiciaire de la CRPJ de Versailles ayant procédé à la notification des droits lors de la reprise de garde à vue à 11 heures 35 minutes a indiqué avoir pris l'attache dès le début de cette mesure avec le procureur de la République à Versailles qui a prescrit de surseoir à l'avis à famille et employeur (D 154) qu'il apparaît ainsi que les formalités légales ont été respectées et que ce moyen de nullité doit être rejeté ; </p>\\n<p>\" 1°) alors que dans sa rédaction en vigueur à l'époque de la garde à vue litigieuse, en date du 13 avril 2016, l'article 63-2 du code de procédure pénale prévoyait expressément en son deuxième alinéa que si l'officier de police judiciaire estimait, en raison des nécessités de l'enquête, ne pas devoir faire droit à la demande d'avis à famille, il en référait sans délai au procureur de la République qui décidait, le cas échéant, d'y faire droit ; qu'en s'appuyant, pour rejeter le moyen de nullité qui lui était soumis, tiré de ce que l'officier de police judiciaire ne s'était que tardivement référé au parquet pour solliciter une dispense d'avis à famille, la chambre de l'instruction n'a pas justifié sa décision et a violé l'article 112-2 du code pénal ; </p>\\n<p>\" 2°) alors que la demande de l'officier de police judiciaire adressée au parquet en vue de déroger à l'avis à famille sollicité par le gardé à vue doit viser la personne concernée ; qu'en se référant à un procès-verbal duquel il ressort une autorisation relative à plusieurs gardés à vue non individualisés de ne pas faire suite aux demandes d'avis à famille, et portant de surcroît à la suite une mention relative à « M. Y... Moussa », sans qu'il soit fait aucune référence au demandeur, la chambre de l'instruction n'a pas justifié sa décision ; </p>\\n<p>\" 3°) alors qu'en tout état de cause, dans sa rédaction en vigueur à l'époque de la garde à vue litigieuse, en date du 13 avril 2016, l'article 63-2 du code de procédure pénale prévoyait expressément en son deuxième alinéa que si l'officier de police judiciaire estimait, en raison des nécessités de l'enquête, ne pas devoir faire droit à la demande d'avis à famille, il en référait sans délai au procureur de la République qui décidait, le cas échéant, d'y faire droit ; qu'en l'espèce, l'avis à magistrat n'est intervenu qu'à 9 heures 40, soit 1 heure 15 après le début de la garde à vue de M. X..., de sorte que la condition d'immédiateté posée par la loi dans sa rédaction en vigueur n'a pas été respectée ; que c'est en violation de l'article 63-2 du code de procédure pénale que la chambre de l'instruction a rejeté ce moyen de nullité \" ; </p>\\n<p>Attendu que pour écarter l'argumentation de M. X... prise de la tardiveté de la requête de l'officier de police judiciaire au procureur de la République tendant à ce qu'il ne soit pas fait droit à la demande de M. X... que son frère soit informé de son placement en garde à vue en application des dispositions de l'article 63-2 du code de procédure pénale, l'arrêt prononce par les motifs repris au moyen ; </p>\\n<p>\\n<br clear=\"none\">Attendu que si c'est à tort que la chambre de l'instruction s'est référée à l'article 63-2 du code de procédure pénale dans sa version issue de la loi n° 2016-731 du 3 juin 2016, alors qu'était applicable, à l'époque de la garde à vue, le texte issu de la loi n° 2011-392 du 14 avril 2011, l'arrêt n'encourt néanmoins pas la censure dès lors que la Cour de cassation, qui a le contrôle des pièces de la procédure, est en mesure de s'assurer que l'officier de police judiciaire s'en est référé au procureur de la République moins d'une heure quinze minutes après le placement en garde à vue de l'intéressé, et que ce magistrat ayant pris sa décision à la suite, avant l'expiration du délai de trois heures prévu au 3ème alinéa de l'article 63-2 du code de procédure pénale, il a été satisfait aux dispositions de ce texte dans sa version alors applicable ; </p>\\n<p>D'où il suit que le moyen doit être rejeté ; </p>\\n<p>Sur le deuxième moyen de cassation, pris de la violation des articles 6 de la Convention européenne des droits de l'homme, préliminaire, 56, 57, 59, 171, 802, 591 et 593 du code de procédure pénale ; </p>\\n<p>\" en ce que la chambre de l'instruction a rejeté le moyen tiré de la nullité des placements sous scellés ; </p>\\n<p>\" aux motifs qu'aux termes de l'article 56 alinéa 4 et 57 alinéa 1 et 2 du code de procédure pénale les scellés provisoires constitués à l'occasion d'une perquisition font l'objet de leur inventaire et de leur mise sous scellés définitifs en présence des personnes qui ont assisté à la perquisition, soit la personne au domicile de laquelle la perquisition a eu lieu ou en cas d'impossibilité un représentant qu'elle aura désigné ou encore à défaut deux témoins requis par l'officier de police judiciaire ; que l'alinéa 2 de l'article 59 du code de procédure pénale dispose notamment que les formalités mentionnées aux articles 56 et 57 du code de procédure pénale sont prescrites à peine de nullité ; qu'il apparaît que, le 13 avril 2016, à 11 heures 55, lors de la perquisition au domicile de M. X..., ... étaient trouvés de l'argent, plusieurs téléphones, 7 valises marocaines siglées \" KT 20 \" et \" CA 20 \" ainsi qu'un sac contenant des plaquettes de résine de cannabis (D 156) ; que le 13 avril 2016 à 12 heures 10, lors de la fouille du véhicule Opel Vivaro ...était également découverte une valise marocaine, siglée \" CA20 \" (D 112) ; que le même jour, à 13 heures, un officier de police judiciaire, procédait au placement sous scellés et à l'échantillonnage de la résine de cannabis emballée dans les valises siglées KT 20 et CA20 et des emballages (D 73) :<br clear=\"none\">- ECHANT1 : Une plaquette de résine de cannabis,<br clear=\"none\">- ECHANT2 : Une plaquette de résine de cannabis,<br clear=\"none\">- ECHANT3 : Une plaquette de résine de cannabis,<br clear=\"none\">- ECHANT4 : Une plaquette de résine de cannabis,<br clear=\"none\">--- Ecartons l'ensemble des emballages de la résine de cannabis,<br clear=\"none\">- Saisissons et plaçons sous scellé :--- EMBAL1 : Emballage cannabis,<br clear=\"none\">- EMBAL2 : Emballage cannabis--- Saisissons et plaçons sous scellé :<br clear=\"none\">- SHIT1 : 31, 30 Kg de rétine de cannabis.<br clear=\"none\">- SHIT2 : 31. 25 Kg de résine de cannabis.<br clear=\"none\">- SHIT3 : 30. 80 Kg de résine de cannabis.<br clear=\"none\">- SHIT4 : 30. 95 Kg de résine de cannabis.<br clear=\"none\">- SHIT5 : 31. 30 Kg de résine de cannabis. <br clear=\"none\">SHIT6 : 31. 40 Kg de résine de cannabis.<br clear=\"none\">- SHIT7 : 31. 15 Kg de résine de cannabis.<br clear=\"none\">- SHIT8 : 31. 20 Kg de résine de cannabis. <br clear=\"none\">qu'il précisait par ailleurs que le poids du sac de résine en vrac accuse un poids de 5, 15 kg, qu'il ajoutait que le poids total était de 254, 5 kg ; que le 14 avril 2016, le même officier de police judiciaire procédait au placement sous scellé de cette résine de cannabis en vrac et de la fiche de scellé provisoire. (D 85) ; qu'il est constant que cette opération a été réalisée hors la présence de MM. X... et de Y..., d'un représentant de leur choix ou de deux témoins désignés par l'officier de police judiciaire ; que cependant la Haute Cour considère que la méconnaissance des prescriptions de fond ou de forme qui sont édictées à peine de nullité aux termes de l'article 59 alinéa du code de procédure pénale n'est susceptible d'entraîner la nullité de cet acte et des actes subséquents que si elle a causé un préjudice aux intérêts de la personne concernée, (Cass crim., 17 septembre 1996, Cass crim., 15 juin 2000, Cass crim., 5 mars 2013, Cass. crim. 18 novembre 2015) qu'en l'occurrence, ni M. X..., ni M. Y... n'allèguent d'un préjudice né de leur absence lors du placement sous scellés définitifs ; que M. X..., présent lors de la constitution des scellés provisoires à son domicile, n'a pas contesté lors de ses auditions et interrogatoires l'origine des objets découverts lors de la perquisition effectuée dans son logement et notamment de la somme d'argent et de la résine de cannabis, qu'il n'a jamais invoqué de différence entre les objets placés sous scellés provisoires et ceux placés sous scellés définitifs ; que M. Y..., présent lors de la constitution du scellé provisoire constitué de la valise siglée CA20 retrouvée dans le véhicule Opel Vivaro immatriculé ..., était absent lors de la perquisition au domicile de M. X... et de la découverte des produits stupéfiants à ce domicile, qu'il n'a pas contesté lors de ses auditions et interrogatoires l'origine de la valise découverte dans le véhicule, expliquant qu'elle devait également être transportée au domicile de M. X... ; qu'il n'a pas invoqué de différence entre cet objet placé sous scellé provisoire et celui placé sous scellé définitif, qu'il ne peut alléguer aucun préjudice né de son absence lors du placement sous scellés définitifs des valises et du sac découverts lors de la perquisition au domicile de M. X... ; </p>\\n<p>\" alors qu'il résulte des articles 56 alinéa 4 et 57 du code de procédure pénale que le placement sous scellés définitifs des objets découverts à l'occasion d'une perquisition doit être réalisé en présence des personnes concernées, d'un représentant de leur choix ou de deux témoins ; que ces formalités sont, aux termes de l'article 59 du même code, prescrites à peine de nullité ; qu'en l'espèce, la chambre de l'instruction a expressément admis que le placement sous scellé des huit valises marocaines contenant de la résine de cannabis a été réalisé en l'absence de toute personne ; que le demandeur faisait par ailleurs valoir qu'il avait toujours affirmé tout ignorer du contenu et du poids de ces valises ; que dans ces conditions, c'est en violation des articles précités que la chambre de l'instruction a rejeté le moyen de nullité en écartant l'existence d'un grief subi par le demandeur \" ; </p>\\n<p>Attendu que, pour écarter le moyen de nullité pris de l'irrégularité de la confection des scellés définitifs en raison de l'inobservation des prescriptions des articles 56, alinéa 4, et 57 du code de procédure pénale, l'arrêt prononce par les motifs repris au moyen ; </p>\\n<p>Attendu qu'en se déterminant ainsi, et dès lors que, d'une part, les formalités prévues par le code de procédure pénale, en matière de perquisition, de saisie et de placement sous scellés, n'étant pas exclues du champ d'application de l'article 802 du même code, leur inobservation ne saurait donner lieu à annulation en l'absence d'atteinte portée aux intérêts de la personne mise en examen, d'autre part, il n'est pas soutenu que le contenu des valises saisies aurait été modifié entre leur placement sous scellés provisoires et celui sous scellés définitifs, la chambre de l'instruction a justifié sa décision ; </p>\\n<p>D'où il suit que le moyen ne saurait être admis ; </p>\\n<p>Mais sur le troisième moyen de cassation, pris de la violation des articles 6 de la Convention européenne des droits de l'homme, préliminaire, 706-30-1, 171, 802, 591 et 593 du code de procédure pénale ; </p>\\n<p>\\n<br clear=\"none\">\" en ce que la chambre de l'instruction a rejeté le moyen tiré de la nullité des opérations de pesée des stupéfiants ; </p>\\n<p>\" aux motifs qu'il est soutenu que la pesée des produits stupéfiants a été faite en violation des dispositions de l'article 706-30-1 alinéa 2 du code de procédure pénale qui dispose que la pesée des produits stupéfiants saisis et placés sous scellés \" doit être réalisée par un code de procédure pénale qui dispose que la pesée des produits stupéfiants saisis et placés sous scellés \" doit être réalisée par un officier de police judiciaire ou par un agent des douanes de catégorie A ou B, en présence de la personne qui détenait les substances ou, à défaut, en présence de deux témoins requis par l'officier de police judiciaire, choisis en dehors des personnes relevant de son autorité \" ; qu'ainsi le procès verbal en date du 13 avril 2016 de placement sous scellés définitifs et échantillonnage des produits stupéfiants encourt l'annulation, qu'il est cité un arrêt de la cour de cassation en date du 24 janvier 2007 par lequel était censuré un arrêt d'une chambre de l'instruction la Cour de cassation ayant refusé d'annuler le procès verbal constatant la pesée de stupéfiants hors la présence du demandeur au pourvoi ; que toutefois l'arrêt cité vient censurer la décision de la chambre de l'instruction pour contradiction de motifs en ce sens que cette dernière a refusé d'annuler partiellement le procès-verbal constatant la pesée et en déclarant le poids ainsi déterminé inopposable à la personne mise en examen, qu'il ne peut en être tiré enseignement dans la présente espèce, alors que l'article 706-30-1 ne prescrit pas ces formalités à peine de nullité, et qu'il n'est invoqué ici aucun grief par le requérant, qu'il n'est pas davantage invoqué de grief par M. Y... ; qu'en outre l'article 706-30-1 du code de procédure pénale se réfère à l'application des dispositions du quatrième alinéa de l'article 99-2 à des substances stupéfiantes saisies au cours de la procédure, lequel dispose \" le juge d'instruction peut également ordonner la destruction des biens meubles placés sous main de justice dont la conservation n'est plus nécessaire à la manifestation de la vérité lorsqu'Il s'agit d'objets qualifiés par la loi de dangereux ou de nuisibles, ou dont la détention est illicite \" ; que si l'article 706-30-1 prévoit que la pesée peut être également réalisée dans les mêmes conditions au cours de \" enquête de flagrance ou de l'enquête préliminaire \", cette hypothèse se rapporte également à la condition que la pesée soit faite en vue de la destruction des dits scellés, qu'en l'espèce, il n'est aucunement mentionné que les opérations de pesée réalisées le 13 avril 2016 constituent un préalable à la destruction des produits stupéfiants ; que le procès verbal vise les articles 53 et suivants du code de procédure pénale, soit le régime de l'enquête de flagrance au cours de laquelle l'officier de police judiciaire doit veiller à la conservation des indices et de tout ce qui peut servir à la manifestation de la vérité, sans aucune référence à l'article 41-5 du code de procédure pénale, disposition qui permet au procureur de la République, en certaines conditions, d'ordonner la destruction des biens dont la détention est illicite ; que le procès-verbal a pour objet cité en marge : \" scellés et échantillonnage de la résine de cannabis et emballage \" ; que la pesée intervenue n'est ici que l'accessoire à la confection de scellés définitifs après inventaire du contenu de scellés provisoires, et constitution d'échantillons ; </p>\\n<p>\" alors qu'il résulte de l'article 706-30-1 alinéa 2 du code de procédure pénale que la pesée des produits stupéfiants doit être réalisée en présence de la personne qui détenait les substances, ou, à défaut, en présence de deux témoins requis par le juge d'instruction ou l'officier de police judiciaire et choisis en dehors des personnes relevant de leur autorité ; que la chambre de l'instruction ne pouvait, après avoir constaté qu'en l'espèce les produits stupéfiants avaient été pesés hors la présence de toute personne, écarter le moyen de nullité en invoquant l'absence de grief \" ; </p>\\n<p>Vu l'article 706-30-1, deuxième alinéa, du code de procédure pénale ; </p>\\n<p>Attendu qu'il résulte de ce texte que la pesée de produits stupéfiants ne peut être réalisée, au cours de l'enquête de flagrance ou de l'enquête préliminaire, qu'en présence de la personne qui détenait les substances, ou, à défaut, en présence de deux témoins ; </p>\\n<p>Qu'en cas de non respect de ces prescriptions, le grief de ladite personne résulte nécessairement de la destruction des substances stupéfiantes ; </p>\\n<p>Attendu que, pour écarter l'argumentation de M. X..., qui soutenait que les prescriptions de l'article 706-30-1 du code de procédure pénale étaient applicables à la pesée des produits stupéfiants intervenue le 14 avril 2013 à l'occasion de leur placement sous scellés définitifs et au cours de l'enquête de flagrance, en sorte que la pesée aurait dû avoir lieu en sa présence ou celle de témoins, l'arrêt prononce par les motifs repris au moyen ; </p>\\n<p>Mais attendu qu'en statuant ainsi, alors que, d'une part, les prescriptions du deuxième alinéa de l'article 706-30-1 du code de procédure pénale sont applicables à la pesée des produits stupéfiants découverts au cours de l'enquête de flagrance, d'autre part, il est sans emport que le procès-verbal de pesée ne fasse pas ressortir l'intention des fonctionnaires de police de procéder ultérieurement à leur destruction, condition que l'arrêt ajoute à tort à la loi, enfin il ressort des pièces de la procédure, dont la Cour de cassation a le contrôle, que les produits stupéfiants saisis ont été détruits sur ordonnance du juge d'instruction le 4 mai 2016, en sorte que le grief de M. X..., qui ne peut plus solliciter une nouvelle pesée contradictoire, est établi, la chambre de l'instruction a méconnu le sens et la portée du texte susvisé et le principe ci-dessus énoncé ; </p>\\n<p>D'où il suit que la cassation est encourue de ce chef ; </p>\\n<p>Par ces motifs : </p>\\n<p>CASSE et ANNULE l'arrêt susvisé de la chambre de l'instruction de la cour d'appel de Versailles, en date du 24 janvier 2017, mais en ses seules dispositions relatives aux opérations de pesée des produits stupéfiants, toutes autres dispositions étant expressément maintenues ; </p>\\n<p>Et pour qu'il soit à nouveau statué, conformément à la loi, dans les limites de la cassation ainsi prononcée, </p>\\n<p>RENVOIE la cause et les parties devant la chambre de l'instruction de la cour d'appel de Paris, à ce désignée par délibération spéciale prise en chambre du conseil ; </p>\\n<p>ORDONNE l'impression du présent arrêt, sa transcription sur les registres du greffe de la chambre de l'instruction de la cour d'appel de Versailles, et sa mention en marge ou à la suite de l'arrêt partiellement annulé ; </p>\\n<p>Ainsi fait et jugé par la Cour de cassation, chambre criminelle, et prononcé par le président le trente et un octobre deux mille dix-sept ; </p>\\n<p>En foi de quoi le présent arrêt a été signé par le président, le rapporteur et le greffier de chambre.</p>\\n<br>",
                "solution": "Cassation partielle",
                "dec_date": "2017-10-31"
                
            }
        const response = await request(server).get('/getDecision?doc_id=JURITEXT000035974619');
        expect(response.status).toEqual(200);
        expect(response.body).toMatchObject(expectedResponse)
    });
});
